# Sway config - migrated from i3
# Read `man 5 sway` for reference

## Mod4 windows key && Mod1 alt key
set $mod Mod4
set $term gnome-terminal

# Input configuration (replaces setxkbmap)
input * {
    xkb_options caps:super
}

# Output configuration (replaces xrandr scripts)
# Example: output HDMI-A-1 resolution 1920x1080 position 1920,0
# List outputs with: swaymsg -t get_outputs

# Wallpaper
output * bg #1d1f21 solid_color
# Or use an image: output * bg ~/Pictures/ubuntu-1.png fill

# Idle configuration (replaces xss-lock + xset)
exec swayidle -w \
    timeout 300 'swaylock -f -c 1d1f21' \
    timeout 600 'swaymsg "output * dpms off"' \
    resume 'swaymsg "output * dpms on"' \
    before-sleep 'swaylock -f -c 1d1f21'

# This font is widely installed, provides lots of unicode glyphs
font pango:Fira Code Regular 10

# Notification daemon (mako is native Wayland alternative to dunst)
exec mako

# NetworkManager applet
exec nm-applet --indicator

# Use pactl to adjust volume in PulseAudio
bindsym XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +10%
bindsym XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -10%
bindsym XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SOURCE@ toggle

# Use Mouse+$mod to drag floating windows
floating_modifier $mod normal

# Move tiling windows via drag & drop
tiling_drag modifier titlebar

# Start a terminal
bindsym $mod+Return exec $term

# Kill focused window
bindsym $mod+Shift+BackSpace kill
bindsym --whole-window $mod+button2 kill

# Start dmenu (a program launcher)
bindsym $mod+d exec dmenu_run

# Start wofi/rofi app launcher
bindsym $mod+space exec wofi --show drun
# Or use rofi (works via XWayland): bindsym $mod+space exec rofi -show drun

# Change focus
bindsym $mod+h focus left
bindsym $mod+a focus left
bindsym $mod+Shift+Left focus left
bindsym $mod+l focus right
bindsym $mod+s focus right
bindsym $mod+Shift+Right focus right
focus_wrapping workspace

# Move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+a move left
bindsym $mod+Shift+l move right
bindsym $mod+Shift+s move right

# Move workspace to another monitor
bindsym $mod+Shift+i move workspace to output left
bindsym $mod+Shift+o move workspace to output right

# Move workspace to monitor with mod+scroll wheel
bindsym --whole-window $mod+button4 move workspace to output left
bindsym --whole-window $mod+button5 move workspace to output right

# Enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# Change container layout (stacked, tabbed, toggle split)
bindsym $mod+t layout tabbed

# Toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# Define names for default workspaces
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4:q"
set $ws5 "5:w"
set $ws6 "6:e"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "0"

# Switch to workspace
bindsym $mod+q workspace number $ws4
bindsym $mod+w workspace number $ws5
bindsym $mod+e workspace number $ws6
bindsym $mod+z workspace number $ws7
bindsym $mod+x workspace number $ws8

bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

# Move focused container to workspace
bindsym $mod+Shift+q move container to workspace number $ws4
bindsym $mod+Shift+w move container to workspace number $ws5
bindsym $mod+Shift+e move container to workspace number $ws6

bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10

# Toggle to previous workspace
bindsym $mod+grave workspace back_and_forth

# Reload the configuration file
bindsym $mod+Shift+c reload

# Resize mode
mode "resize" {
    bindsym l resize shrink width 10 px or 10 ppt
    bindsym k resize grow height 10 px or 10 ppt
    bindsym j resize shrink height 10 px or 10 ppt
    bindsym h resize grow width 10 px or 10 ppt

    bindsym Left resize shrink width 10 px or 10 ppt
    bindsym Down resize grow height 10 px or 10 ppt
    bindsym Up resize shrink height 10 px or 10 ppt
    bindsym Right resize grow width 10 px or 10 ppt

    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym $mod+r mode "default"
}
bindsym $mod+r mode "resize"

# Status bar (swaybar with i3blocks)
bar {
    status_command i3blocks -c ~/.config/i3blocks/config
    font pango:DejaVu Sans Mono 10
    position top
    colors {
        background         #000000
        statusline         #E0E0E0
        separator          #2A2A2A

        focused_workspace  #3A7BD5 #000000 #FFFFFF
        active_workspace   #1E1E1E #000000 #D4D4D4
        inactive_workspace #1E1E1E #000000 #999999
        urgent_workspace   #D65F5F #000000 #FFFFFF
    }
}

# Window border thickness
default_border pixel 2
default_floating_border pixel 2

# Colors
# class                 border     background text     indicator child_border
client.focused          #5C6370    #000000    #E0E0E0  #5C6370   #5C6370
client.focused_inactive #1E1E1E    #000000    #BBBBBB  #1E1E1E   #1E1E1E
client.unfocused        #1E1E1E    #000000    #999999  #1E1E1E   #1E1E1E
client.urgent           #D65F5F    #000000    #FFFFFF  #D65F5F   #D65F5F

# Lock screen (swaylock replaces i3lock)
bindsym $mod+period exec swaylock -c 000000
bindsym $mod+Escape exec swaylock -c 1d1f21

# Exit sway
bindsym $mod+Shift+period exec swaynag -t warning -m 'Exit sway?' -B 'Yes' 'swaymsg exit'

# Brightness
bindsym XF86MonBrightnessUp exec brightnessctl set +5%
bindsym XF86MonBrightnessDown exec brightnessctl set 5%-

# Open file manager
bindsym $mod+u exec nemo

# Workspace navigation
bindsym $mod+Tab focus output current, workspace next_on_output
bindsym $mod+Shift+Tab focus output current, workspace prev_on_output
bindsym $mod+Up workspace next
bindsym $mod+Down workspace prev
bindsym $mod+Left workspace prev_on_output
bindsym $mod+Right workspace next_on_output

# Screenshot (grim + slurp replaces flameshot)
bindsym $mod+Shift+x exec grim -g "$(slurp)" ~/Pictures/screenshot-$(date +%Y%m%d-%H%M%S).png
# Copy to clipboard
bindsym $mod+Shift+p exec grim -g "$(slurp)" - | wl-copy

# Calendar
bindsym $mod+plus exec zenity --calendar
bindsym $mod+Shift+plus exec pkill zenity

# Gaps
gaps inner 2
gaps outer 1

# Don't automatically switch workspace when a window is urgent
focus_on_window_activation none

# Disable focus following mouse
focus_follows_mouse no

# App â†’ workspace (use app_id for native Wayland apps, class for XWayland)
assign [class="(?i)slack"] $ws7
assign [class="(?i)zoom"]  $ws8
assign [app_id="(?i)slack"] $ws7
assign [app_id="(?i)zoom"]  $ws8

for_window [class="(?i)slack"] move to workspace number $ws7
for_window [class="(?i)zoom"]  move to workspace number $ws8

# Open pavucontrol
bindsym $mod+Shift+d exec pavucontrol

# Open bluetooth manager
bindsym $mod+Shift+b exec blueman-manager

# Open code
bindsym $mod+c exec code

# Open browser
bindsym $mod+b exec brave-browser-stable

# Restart solaar (fix bluetooth mouse)
bindsym $mod+minus exec ~/.config/i3/restart-solaar.sh

# Pomodoro timer
bindsym $mod+p exec ~/.config/i3blocks/pomodoro set 5m
bindsym $mod+bracketleft exec ~/.config/i3blocks/pomodoro set 10m
bindsym $mod+bracketright exec ~/.config/i3blocks/pomodoro set 25m
bindsym $mod+Shift+p exec ~/.config/i3blocks/pomodoro stop

# Include additional config files (optional)
include /etc/sway/config.d/*
